<IfModule mod_ssl.c>
<VirtualHost *:443>
 ServerAdmin despliegue-apache@localhost
 ServerName despliegue-apache
 ServerAlias www.despliegue-apache
 DocumentRoot /var/www/despliegue-apache/ejemplo2
 SSLEngine on
 SSLCertificateFile /etc/ssl/certs/despliegue-apache.crt
 SSLCertificateKeyFile /etc/ssl/private/despliegue-apache.key
 ErrorLog ${APACHE_LOG_DIR}/error.log
 CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
</IfModule>








public function update(Request $request, Machine $machine)
    {

        dd ($request);

        $request->validate([
            'name' => ['required'],
            'alias' => ['required'],
            'model' => ['required'],
            'codigo' => ['required', 'regex:/^[A-Za-z0-9]{3}$/'],
            'serie' => ['required', 'regex:/^\d{2}( [A-Za-z]|[A-Za-z]{2})$/'],
            'numero' => ['required', 'digits:6'],
            //'local' => ['required'],
        ], [
            'name.required' => 'El nombre de la máquina es obligatorio.',
            'alias.required' => 'El alias de la máquina es obligatorio.',
            'model.required' => 'El modelo de la máquina es obligatorio.',
            'codigo.required' => 'El código de la máquina es obligatorio.',
            'codigo.regex' => 'El código debe ser una cadena de exactamente 3 caracteres alfanuméricos.',
            'serie.required' => 'La serie de la máquina es obligatoria.',
            'serie.regex' => 'La serie debe ser una cadena de 4 caracteres, con los primeros 2 siendo números y los últimos 2 siendo dos letras o un espacio seguido de una letra.',
            'numero.required' => 'El número de la máquina es obligatorio.',
            'numero.digits' => 'El número debe tener exactamente 6 dígitos.',
            //'local.required' => 'El local de la máquina es obligatorio.',
        ]);

        $local = explode(":", $request->local);
        $identificador = $request->model . ':' . $request->codigo . ':' . $request->serie . ':' . $request->numero;

        $machine->identificador = $identificador;
        $machine->name = $request->name;
        $machine->alias = $request->alias;

        $machine->local_id = 1;
        $machine->bar_id = 1;
        $machine->delegation_id = $request->delegation_id;

        $machine->timestamps = false;

        $machine->save();
        return redirect()->route('machines.index', $request->delegation_id);
    }
